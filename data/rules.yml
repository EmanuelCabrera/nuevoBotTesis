version: "3.1"

rules:
- rule: saludo directo
  steps:
  - intent: saludo
  - action: utter_saludo

- rule: despedida directa
  steps:
  - intent: despedida
  - action: utter_despedida

- rule: agradecimiento directo
  steps:
  - intent: agradecimiento
  - action: utter_agradecimiento

- rule: Autenticación automática
  steps:
    - intent: autenticar_usuario
    - action: action_authenticate_user

- rule: fallback para baja confianza
  steps:
  - intent: nlu_fallback
  - action: utter_please_rephrase

- rule: out of scope
  steps:
  - intent: out_of_scope
  - action: utter_out_of_scope

- rule: proporcionar matrícula
  steps:
  - intent: proporcionar_matricula
  - action: action_consultar_materias

- rule: consultar materias con matrícula existente
  condition:
  - slot_was_set:
    - matricula: not null
  steps:
  - intent: consultar_materias
  - action: action_consultar_materias