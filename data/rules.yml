version: "3.1"

rules:
- rule: saludo directo
  steps:
  - intent: saludo
  - action: utter_saludo

- rule: despedida directa
  steps:
  - intent: despedida
  - action: utter_despedida

- rule: agradecimiento directo
  steps:
  - intent: agradecimiento
  - action: utter_agradecimiento

- rule: Autenticar usuario con token
  steps:
    - intent: autenticar_usuario
    - action: action_authenticate_user

- rule: Inscribirse a mesa de examen solo si autenticado
  condition:
    - slot_was_set:
        - is_authenticated: true
  steps:
    - intent: codigo_mesa_examen
    - action: action_inscripcion_mesa

- rule: Intento de inscripción sin autenticación
  condition:
    - slot_was_set:
        - is_authenticated: false
  steps:
    - intent: codigo_mesa_examen
    - action: utter_need_authentication

- rule: fallback para baja confianza
  steps:
  - intent: nlu_fallback
  - action: utter_please_rephrase

- rule: out of scope
  steps:
  - intent: out_of_scope
  - action: utter_out_of_scope