version: "3.1"

rules:
- rule: saludo directo
  steps:
  - intent: saludo
  - action: utter_saludo

- rule: despedida directa
  steps:
  - intent: despedida
  - action: utter_despedida

- rule: agradecimiento directo
  steps:
  - intent: agradecimiento
  - action: utter_agradecimiento

- rule: Autenticación automática
  steps:
    - intent: autenticar_usuario
    - action: action_authenticate_user

- rule: fallback para baja confianza
  steps:
  - intent: nlu_fallback
  - action: utter_please_rephrase

- rule: out of scope
  steps:
  - intent: out_of_scope
  - action: utter_out_of_scope

- rule: consultar materias con matrícula existente
  condition:
  - slot_was_set:
    - matricula: not null
  steps:
  - intent: consultar_materias
  - action: action_consultar_materias

- rule: consultar notas con matrícula y materia existentes
  condition:
  - slot_was_set:
    - matricula: not null
    - materia: not null
  steps:
  - intent: consultar_notas
  - action: action_consultar_notas

- rule: consultar notas con matrícula pero sin materia
  condition:
  - slot_was_set:
    - matricula: not null
    - materia: null
  steps:
  - intent: consultar_notas
  - action: utter_solicitar_materia_notas

- rule: consultar notas con materia pero sin matrícula
  condition:
  - slot_was_set:
    - matricula: null
    - materia: not null
  steps:
  - intent: consultar_notas
  - action: utter_solicitar_matricula_notas

- rule: consultar notas sin matrícula ni materia
  condition:
  - slot_was_set:
    - matricula: null
    - materia: null
  steps:
  - intent: consultar_notas
  - action: utter_solicitar_matricula_y_materia_notas

- rule: consultar requerimientos de materia
  steps:
  - intent: consultar_requerimientos_materia
  - action: action_consultar_requerimientos_materia

- rule: ofrecer mesas de examen para inscripción
  steps:
    - intent: inscribirse_mesa_examen
    - action: action_ofrecer_mesas_examen

- rule: inscribir a mesa de examen tras selección
  steps:
    - intent: seleccionar_mesa_examen
    - action: action_inscripcion_mesa_examen

- rule: ofrecer mesas de examen tras proporcionar materia para inscripcion
  steps:
    - intent: proporcionar_materia_para_inscripcion
    - action: action_ofrecer_mesas_examen

- rule: continuar inscripcion mesa de examen tras matricula
  condition:
    - slot_was_set:
        - flujo_actual: inscripcion_mesa_examen
  steps:
    - action: action_ofrecer_mesas_examen

- rule: continuar consultar materias tras matricula
  condition:
    - slot_was_set:
        - flujo_actual: consultar_materias
  steps:
    - action: action_consultar_materias

- rule: continuar consultar notas tras matricula
  condition:
    - slot_was_set:
        - flujo_actual: consultar_notas
  steps:
    - action: action_consultar_notas

- rule: continuar consultar notas tras materia
  condition:
    - slot_was_set:
        - flujo_actual: consultar_notas
  steps:
    - action: action_consultar_notas

- rule: continuar consultar requerimientos tras matricula
  condition:
    - slot_was_set:
        - flujo_actual: consultar_requerimientos_materia
  steps:
    - action: action_consultar_requerimientos_materia

- rule: continuar consultar requerimientos tras materia
  condition:
    - slot_was_set:
        - flujo_actual: consultar_requerimientos_materia
  steps:
    - action: action_consultar_requerimientos_materia

- rule: consultar asistencia con matrícula y materia existentes
  condition:
  - slot_was_set:
    - matricula: not null
    - materia: not null
  steps:
  - intent: consultar_asistencia
  - action: action_consultar_asistencia

- rule: continuar consultar asistencia tras matrícula
  condition:
    - slot_was_set:
        - flujo_actual: consultar_asistencia
  steps:
    - action: action_consultar_asistencia

- rule: continuar consultar asistencia tras materia
  condition:
    - slot_was_set:
        - flujo_actual: consultar_asistencia
  steps:
    - action: action_consultar_asistencia

- rule: proporcionar materia para asistencia
  steps:
    - intent: proporcionar_materia_para_asistencia
    - action: action_consultar_asistencia

- rule: consultar asistencia sin matrícula ni materia
  condition:
  - slot_was_set:
    - matricula: null
    - materia: null
  steps:
  - intent: consultar_asistencia
  - action: action_consultar_asistencia

- rule: consultar asistencia con matrícula pero sin materia
  condition:
  - slot_was_set:
    - matricula: not null
    - materia: null
  steps:
  - intent: consultar_asistencia
  - action: action_consultar_asistencia

- rule: consultar asistencia con materia pero sin matrícula
  condition:
  - slot_was_set:
    - matricula: null
    - materia: not null
  steps:
  - intent: consultar_asistencia
  - action: action_consultar_asistencia




